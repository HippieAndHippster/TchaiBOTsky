<html>
	<body>
		<script type="text/javascript">
			//E S C A L A    E S C O G I D A
			var pentagrama = {
				tempo: 120,
				sentimiento: 0,
				velocidad: 1,
				melodia: [
					["C",4],
					["D",4],
					["E",4],
					["F",4]
				]
			};

			var escalasEscojidas = [0,4,8,0];
			var ritmos = [
							[
								[1,4,1,2,1,2,1,4]
							],
							[
								[4,2,4,2,4]
							],
							[
								[4,4,4,4]
							]
						];
			var acordes = new Array();
			for(var i = 0;i < escalasEscojidas.length;i++)
			{
				acordes.push(new Array());
				acordes[i].push( [ escalasEscojidas[i]		,(escalasEscojidas[i]+4)%12	,(escalasEscojidas[i]+7 )%12]	);//PRIMERA
				acordes[i].push( [(escalasEscojidas[i]+2)%12,(escalasEscojidas[i]+7)%12	,(escalasEscojidas[i]+11)%12]	);//QUINTA
				acordes[i].push( [ escalasEscojidas[i]		,(escalasEscojidas[i]+4)%12	,(escalasEscojidas[i]+9 )%12]	);//SEXTA
				acordes[i].push( [ escalasEscojidas[i]		,(escalasEscojidas[i]+5)%12	,(escalasEscojidas[i]+9 )%12]	);//CUARTA
			}

			var ritmo = new Array();
			
			var respuesta = {
				tempo: pentagrama.tempo,
				sentimiento: pentagrama.sentimiento,
				melodia: new Array()
			};

			ritmo = ritmos[pentagrama.velocidad][	Math.floor((Math.random() * (ritmos[pentagrama.velocidad].length-1)) + 0)	];
			if(pentagrama.velocidad==0)
			{
				for(var i = 0; i < ritmo.length; i++)
				{
					respuesta.melodia.push([acordes[pentagrama.sentimiento][i%4],ritmo[i]]);
				}	
			}
			else
			{
				var ii = 0;
				var limit = ritmo.length/4;
				var iChords = 0;
				for(var i = 0; i < ritmo.length; i++)
				{
					respuesta.melodia.push([acordes[pentagrama.sentimiento][iChords],ritmo[i]]);
					ii++;
					if(ii>limit)
					{
						ii=0;
						iChords++;
					}
				}	
			}


			//A C O P L A M I E N T O     A      L I B R E R I A      M I D I
			
			melodiaMidi = new Array();
			for(var i = 0; i < respuesta.melodia; i++){
				respuesta.melodia[i][]
			}


		</script>
	</body>
</html>